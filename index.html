<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Testing SVG as Animation</title>
    <script type="text/javascript" src="d3/d3.js"></script>

    <style>
    svg {

    	border-color:black;
    	border-width:10px;
    	border-style:solid;


    }

    rect.fence {
    	-webkit-animation: fencewalk 5s linear, fencewalk 5s linear reverse;
    	-webkit-animation-delay: 5s, 25s;
    }

    @-webkit-keyframes fencewalk {

    	from {fill :silver; transform: translateX(0px);}
    	to {fill: silver; transform: translateX(-530px);}
    }


    g.dog {
    	

    	-webkit-animation: bounce 0.5s linear 70, bounceback 0.5s linear 70;
    	-webkit-animation-delay: 0s, 20s;
    }

    @-webkit-keyframes bounce {
    	from {transform:translateY(0px);}
    	50% {transform:translateY(10px);}
    	to { transform:translateY(0px);}

    }

    @-webkit-keyframes bounceback {
    	from {transform:translateY(0px) scale(-1,1);}
    	50% {transform:translateY(10px) scale(-1,1);}
    	to { transform:translateY(0px) scale(-1,1);}

    }


    g.dog_container {

    	-webkit-animation: walk_in_from_left 5s linear,
    					   walk_out_from_left 5s linear,
    					   walk_out_from_left 5s linear reverse,
    					   walk_in_from_left 5s linear reverse;
    					   
    	-webkit-animation-delay: 0s, 10s, 20s,30s;
    } 

    @-webkit-keyframes walk_in_from_left {
    	from {transform:translate(0px,0px);}
    	to { transform:translate(427px,0px);}
    }

    @-webkit-keyframes walk_out_from_left {
    	from {transform:translate(427px,0px);}
    	to { transform:translate(854px,0px);}
    }

    .rain>rect {

    	-webkit-animation: rainfall 5s linear infinite;
    	-webkit-animation-delay:0s;
    }

    @-webkit-keyframes rainfall {

    	from {transform: translate(0px, 0px);}
    	to {transform:translate(0px,1000px);}
    }

    .snow>circle {

    	-webkit-animation: snowfall 10s linear infinite;
    	-webkit-animation-delay:0s;
    }

    @-webkit-keyframes snowfall {

    	from {transform: translate(0px, 0px);}
    	to {transform: translate(0px,480px);}
    }

    .leaf>ellipse {

    	-webkit-animation: leafdrop 10s linear infinite;
    	-webkit-animation-delay:0s;
    }

    @-webkit-keyframes leafdrop {

    	from {transform: translate(0px, 0px) rotate(-30deg, 20, 90) scale(1,1);}
    	50% {transform: translate(100px,240px) rotate(30deg, 50,50) scale(-1,1);}
    	to {transform: translate(-100px,480px) rotate(-30deg, -20,-90) scale(1,1);}
    }


    </style>


</head>

<body>

  <script src="objects.js"></script>

  <script>
  	var w = 854;
  	var h = 480;

  	var dataset = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];

  	///////////////////////////////////////////////// START MAIN SVG **************************************
  	var svg = d3.select("body")
  				.append("svg")
  				.attr("width", w)
  				.attr("height", h);

  	var rectangles = svg.selectAll("rect")
					   .data(dataset)
					   .enter()
					   .append("rect")
					   .attr("class","fence")
					   .attr("x", function(d, i) {

						    return i * 29;  //Bar width of 20 plus 1 for padding
						})
					   .attr("y", 75)
					   .attr("width", 25)
					   .attr("height", function(d, i) {

					   		if (d == 0) {
					   			return h - 220;
					   		}
					   		return h - 75;
					   	})
					   .attr("fill","silver");

  	var fence_frame_top = svg.append("rect")
  							 .attr({
  							 	x: 0,
  							 	y: 100,
  							 	width: w,
  							 	height: 5,
  							 	fill: "black"
  							 });

  	var fence_frame_bottom = svg.append("rect")
  								.attr({
  									x: 0,
  									y: h-20,
  									width: w,
  									height: 5,
  									fill: "black"
  								})

  	var my_dog = create_dog(1);
  	/////////////////////////////////////////////// END MAIN SVG **************************************

  	/////////////////////////////////////////////// START TEST SVG **************************************

  	//paused: field where grass is greener
  	var grass_is_greener = d3.select("body")
  							 .append("svg")
  							 .attr({
  							 	width: w,
  							 	height: h
  							 });

    var sky = grass_is_greener.append("rect")
    				  .attr("x", 0)
    				  .attr("y", 0)
    				  .attr("width", "100%")
    				  .attr("height", "100%")
    				  .attr("fill", "lightblue");

  	var field1 = grass_is_greener.append("ellipse")
  						.attr("cx", w/3)
  						.attr("cy", h)
  						.attr("rx", w/2+100)
  						.attr("ry", h/2)
  						.attr("fill", "#55AE3A");

  	var field2 = grass_is_greener.append("ellipse")
  						 .attr("cx", w - w/6)
  						 .attr("cy", h+50)
  						 .attr("rx", w/2+150)
  						 .attr("ry", h/2)
  						 .attr("fill", "#4DBD33");

  	var flower1 = create_flower_1(250, 275);
  	var flower2 = create_flower_1(500, 350);
  	var flower3 = create_flower_2(120, 350);
  	var flower4 = create_flower_2(675, 275);

  	// start: fake ending for now
  	var fake_ending = grass_is_greener.append("text")
  							  .attr("x", 200)
  							  .attr("y", 200)
  							  .attr("fill", "black")
  							  .attr("font-family", "arial,sans-serif")
  							  .attr("font-size", 36)
  							  .text("THE END.");
  	// end: just to show the words "the end"


  	var staring_dog = create_dog_looking_through_fence();

	/////////////////////////////////////////////// END TEST SVG **************************************

	/////////////////////////////////////////////// START SEASONS SVG *********************************
	var seasons_svg = d3.select("body")
						.append("svg")
						.attr("width",w)
						.attr("height",h)



  	var winter = seasons_svg.append("g")
  							.attr("class", "winter");

	// fence stuff
	var rectangles = seasons_svg.selectAll("class", "fence")
					   .data(dataset)
					   .enter()
					   .append("rect")
					   //.attr("class","fence")
					   .attr("x", function(d, i) {
						    return i * 35;  //Bar width of 20 plus 1 for padding
						})
					   .attr("y", 75)
					   .attr("width", 30)
					   .attr("height", h - 75)
					   .attr("fill","silver");

	var fence_frame_top = seasons_svg.append("rect")
  						 .attr("x",0)
  						 .attr("y",100)
  						 .attr("width",w)
  						 .attr("height",5)
  						 .attr("fill","black");

  	var fence_frame_bottom = seasons_svg.append("rect")
  						 .attr("x",0)
  						 .attr("y",h-20)
  						 .attr("width",w)
  						 .attr("height",5)
  						 .attr("fill","black");
  	// end fence stuff


  	var winter_sky = winter.append("rect")
  						   .attr("x", 0)
  						   .attr("y", 0)
  						   .attr("width", w)
  						   .attr("height", h)
  						   .attr("fill", "AliceBlue");

    /// RAINNN
    var rain = seasons_svg.append("g")
    					  .attr("class", "rain");
    //create an array of integers where the length corresponds to the number of rain particles
    var rain_place_holders =[], len=900; while (rain_place_holders[--len] = len);
    var rain_drops = rain.selectAll("class", "rain")
    				   .data(rain_place_holders)
    				   .enter()
    				   .append("rect")
    				   .attr({
    				   		x : function(d, i) { 
    				   			
    				   			return Math.floor(Math.random() * w);
    				   			
    				   		},
    				   		y : function(d, i) { 
    				   			if (i < 300){
    				   				return Math.floor(Math.random() * h);
    				   			} else if (i >= 300 && i < 600) {
    				   				//return (Math.floor(Math.random() * (h + h)) - h);
    				   				return (-Math.floor(Math.random() * h));
    				   			} else {
    				   				return (-2*Math.floor(Math.random() * h));
    				   			}
    				   		},
    				   		width: 3,
    				   		height: function(min, max) { return Math.floor(Math.random() * (20 - 10)) + 10;},
    				   		fill: "#6699CC"
    				   });

    /// SNOWWWW
    var snow = seasons_svg.append("g")
    					  .attr("class", "snow");
    //create an array of integers where the length corresponds to the number of rain particles
    var snow_place_holders =[], len=200; while (snow_place_holders[--len] = len);
    var snow_flakes = snow.selectAll("class", "snow")
    				   .data(snow_place_holders)
    				   .enter()
    				   .append("circle")
    				   .attr({
    				   		cx : function(d, i) { 
    				   			
    				   			return Math.floor(Math.random() * w);
    				   			
    				   		},
    				   		cy : function(d, i) { 
    				   			if (i < 150){
    				   				return Math.floor(Math.random() * h);
    				   			} else {
    				   				//return (Math.floor(Math.random() * (h + h)) - h);
    				   				return (-Math.floor(Math.random() * h));
    				   			}
    				   		},
    				   		r : function(min, max) { return Math.floor(Math.random() * (15 - 3)) + 3;},
    				   		fill: "white"
    				   });

    /// LEAVES
    var leaves = seasons_svg.append("g")
    					  .attr("class", "leaf");
    //create an array of integers where the length corresponds to the number of rain particles
    var leaf_place_holders =[], len=150; while (snow_place_holders[--len] = len);
    var dead_leaves = leaves.selectAll("class", "leaf")
    				   .data(snow_place_holders)
    				   .enter()
    				   .append("ellipse")
    				   .attr({
    				   		cx : function(d, i) { 
    				   			
    				   			return Math.floor(Math.random() * w);
    				   			
    				   		},
    				   		cy : function(d, i) { 
    				   			if (i < 75){
    				   				return Math.floor(Math.random() * h);
    				   			} else {
    				   				//return (Math.floor(Math.random() * (h + h)) - h);
    				   				return (-Math.floor(Math.random() * h));
    				   			}
    				   		},
    				   		rx : function(min, max) { return Math.floor(Math.random() * (6 - 3)) + 3;},
    				   		ry : function(min, max) { return Math.floor(Math.random() * (15 - 7)) + 7;},
    				   		fill: function(d,i) { return i%2 == 0 ? "green" : "orange";}
    				   });

	/////////////////////////////////////////////// END SEASONS SVG ***********************************



  </script>

<!--<input type="button" onClick="stop=!stop;circleBounce(); if (stop) this.value='Start'; else this.value='Stop';return false" VALUE="Start">-->
  <h1>This is a Heading</h1>
  <p>This is a paragraph.</p>

</body>

</html>