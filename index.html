<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Testing SVG as Animation</title>
    <script type="text/javascript" src="d3/d3.js"></script>

    <style>
    svg {

    	border-color:black;
    	border-width:10px;
    	border-style:solid;


    }

    rect.fence {
    	-webkit-animation: fencewalk 5s 5s linear forwards,
    					   fencewalkhome 5s 38s linear forwards;
    }

    @-webkit-keyframes fencewalk {
    	from {transform: translateX(0px);}
    	to {transform: translateX(-530px);}
    }

    @-webkit-keyframes fencewalkhome {
    	from {transform: translateX(-530px);}
    	to {transform: translateX(0px);}
    }

    .fenceparts {
    	-webkit-animation: fadeout .5s 12s forwards,
    					   fadein .5s 14s forwards,
    					   fence_become_night 1s 24s forwards,
    					   fadeout .5s 34s forwards,
    					   fadein .5s 36s forwards;

    }

    .grass_is_greener {

    	-webkit-animation: become_greener .5s 12s forwards,
    					   become_less_green .5s 14s forwards,
    					   become_greener .5s 34s forwards,
    					   become_less_green .5s 36s forwards; 
    }
    
    @-webkit-keyframes become_greener {
    	from {opacity:.6;}
    	to {opacity:1;}
    }
    @-webkit-keyframes become_less_green {
    	from {opacity:1;}
    	to {opacity:.6;}
    }

    .grass_is_greener > rect {
    	-webkit-animation: sky_become_night 1s 24s forwards,
    					   sky_become_night 1s 50s reverse forwards; /* fix later */

    }

    @-webkit-keyframes sky_become_night {
    	from { fill: lightblue;}
    	to {fill: darkblue;}
    }

    @-webkit-keyframes fence_become_night {

    	from { fill: darkgray;}
    	to {fill: lightslategray;}

    }

    @-webkit-keyframes field1_become_night {

    	from { fill: #55AE3A;}
    	to {fill: #1c3813;}

    }

    @-webkit-keyframes field2_become_night {

    	from { fill: #4DBD33;}
    	to {fill: #1b4112;}

    }

    .field1 {
    	-webkit-animation: field1_become_night 1s 24s forwards,
    					   field1_become_night 1s 50s reverse forwards; /* fix later */

    }

    .field2 {
    	-webkit-animation: field2_become_night 1s 24s forwards,
    					   field2_become_night 1s 50s reverse forwards; /* fix later */

    }


    g.dog {
    	-webkit-animation: bounce 0.5s 0s 20, 
    					   fadeout .5s 10s,
    					   fadein 1s 16s forwards,
    					   shrug .5s 17s 1,
    					   bounce .5s 18s 10,
    					   bounceback 0.5s 26s 12,
    					   bounceback .5s 38s 23;

    	/*-webkit-animation: fadeout 1s 3s forwards;*/
    }

    @-webkit-keyframes bounce {
    	from {transform:translateY(0px);}
    	50% {transform:translateY(10px);}
    	to {transform:translateY(0px);}
    }

    @-webkit-keyframes bounceback {
    	from {transform:translateY(0px) scale(-1,1);}
    	50% {transform:translateY(10px) scale(-1,1);}
    	to {transform:translateY(0px) scale(-1,1);}
    }

    @-webkit-keyframes shrug {
    	from {transform:translateY(0px);}
    	50% {transform:translateY(-5px);}
    	to {transform:translateY(0px);}

    }


@-webkit-keyframes fadeout {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

@-webkit-keyframes fadein {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

    g.dog_container {

    	-webkit-animation: walk_in_from_left 5s 0s linear, 
    					   fadeout .5s 10s linear forwards,
    					   fadein .5s 16s linear forwards,
    					   walk_out_from_left 5s 18s linear,
    					   walk_out_from_left 6s 26s linear reverse,
    					   fadeout .5s 32s linear forwards,
    					   fadein .5s 38s linear forwards,
    					   walk_in_from_left 6s 43s linear reverse;    
    } 

    @-webkit-keyframes walk_in_from_left {
    	from {transform:translate(0px,0px);}
    	to { transform:translate(427px,0px);}
    }

    @-webkit-keyframes walk_out_from_left {
    	from {transform:translate(427px,0px);}
    	to { transform:translate(854px,0px);}
    }

    .staring_dog {
    	opacity: 0;

    	-webkit-animation: fadein .5s 10s forwards,
    					   fadeout .5s 12s forwards,
    					   fadein .5s 14s forwards,
    					   fadeout .5s 16s forwards,
    					   fadein .5s 32s forwards,
    					   fadeout .5s 34s forwards,
    					   fadein .5s 36s forwards,
    					   fadeout .5s 38s forwards;
    }

	/* WEATHER */
    .rain>rect {

    	-webkit-animation: rainfall 5s linear infinite;
    	-webkit-animation-delay:0s;
    }

    @-webkit-keyframes rainfall {

    	from {transform: translate(0px, 0px);}
    	to {transform:translate(0px,1000px);}
    }

    .snow>circle {

    	-webkit-animation: snowfall 10s linear infinite;
    	-webkit-animation-delay:0s;
    }

    @-webkit-keyframes snowfall {

    	from {transform: translate(0px, 0px);}
    	to {transform: translate(0px,480px);}
    }

    .leaf>ellipse {

    	-webkit-animation: leafdrop 10s linear infinite;
    	-webkit-animation-delay:0s;
    }

    @-webkit-keyframes leafdrop {

    	from {transform: translate(0px, 0px) rotate(-30deg, 20, 90) scale(1,1);}
    	50% {transform: translate(100px,240px) rotate(30deg, 50,50) scale(-1,1);}
    	to {transform: translate(-100px,480px) rotate(-30deg, -20,-90) scale(1,1);}
    }
    /* END WEATHER */

    </style>


</head>

<body>

  <script src="objects.js"></script>

  <script>
  	var w = 854;
  	var h = 480;

  	var dataset = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];

  	///////////////////////////////////////////////// START MAIN SVG **************************************
  	var svg = d3.select("body")
  				.append("svg")
  				.attr("width", w)
  				.attr("height", h);

  	var grass_is_greener = svg.append("g")
    							   .attr("class", "grass_is_greener")
    							   .attr("opacity", ".6");

    var sky = grass_is_greener.append("rect")
    				  .attr("x", 0)
    				  .attr("y", 0)
    				  .attr("width", "100%")
    				  .attr("height", "100%")
    				  .attr("fill", "lightblue");

  	var field1 = grass_is_greener.append("ellipse")
  						.attr("cx", w/3)
  						.attr("cy", h)
  						.attr("rx", w/2+100)
  						.attr("ry", h/2)
  						.attr("fill", "#55AE3A");

  	var field2 = grass_is_greener.append("ellipse")
  						 .attr("cx", w - w/6)
  						 .attr("cy", h+50)
  						 .attr("rx", w/2+150)
  						 .attr("ry", h/2)
  						 .attr("fill", "#4DBD33");

  	var flower1 = create_flower_1(250, 275);
  	var flower2 = create_flower_1(500, 350);
  	var flower3 = create_flower_2(120, 350);
  	var flower4 = create_flower_2(675, 275);


  	var fenceparts = svg.append("g")
  						 .attr("class", "fenceparts");

  	var rectangles = fenceparts.selectAll("rect")
					   .data(dataset)
					   .enter()
					   .append("rect")
					   .attr("class","fence")
					   .attr("x", function(d, i) {

						    return i * 29;  //Bar width of 20 plus 1 for padding
						})
					   .attr("y", 75)
					   .attr("width", 25)
					   .attr("height", function(d, i) {

					   		if (d == 0) {
					   			return h - 220;
					   		}
					   		return h - 75;
					   	})
					   .attr("fill","darkgray");

  	var fence_frame_top = fenceparts.append("rect")
  							 .attr({
  							 	x: 0,
  							 	y: 100,
  							 	width: w,
  							 	height: 5,
  							 	fill: "black"
  							 });

  	var fence_frame_bottom = fenceparts.append("rect")
  								.attr({
  									x: 0,
  									y: h-20,
  									width: w,
  									height: 5,
  									fill: "black"
  								})

  	var my_dog = create_dog(1);


  	/* flyer falls from sky */
  	//var flyer = svg.append("rect")


  	/////////////////////////////////////////////// END MAIN SVG **************************************

  	/////////////////////////////////////////////// START TEST SVG **************************************

  	//paused: field where grass is greener
  	var svg = d3.select("body")
  				.append("svg")
  				.attr("width", w)
  				.attr("height", h);

  	var grass_is_greener = svg.append("g")
    							   .attr("class", "grass_is_greener")
    							   .attr("opacity", ".6");

    var sky = grass_is_greener.append("rect")
    				  .attr("x", 0)
    				  .attr("y", 0)
    				  .attr("width", "100%")
    				  .attr("height", "100%")
    				  .attr("fill", "lightblue");

  	var field1 = grass_is_greener.append("ellipse")
  								 .attr("class", "field1")
  						.attr("cx", w/3)
  						.attr("cy", h)
  						.attr("rx", w/2+100)
  						.attr("ry", h/2)
  						.attr("fill", "#55AE3A");

  	var field2 = grass_is_greener.append("ellipse")
  								 .attr("class", "field2")
  						 .attr("cx", w - w/6)
  						 .attr("cy", h+50)
  						 .attr("rx", w/2+150)
  						 .attr("ry", h/2)
  						 .attr("fill", "#4DBD33");

  	var flower1 = create_flower_1(250, 275);
  	var flower2 = create_flower_1(500, 350);
  	var flower3 = create_flower_2(120, 350);
  	var flower4 = create_flower_2(675, 275);


  	var fenceparts = svg.append("g")
  						 .attr("class", "fenceparts");

  	var rectangles = fenceparts.selectAll("rect")
					   .data(dataset)
					   .enter()
					   .append("rect")
					   .attr("class","fence")
					   .attr("x", function(d, i) {

						    return i * 29;  //Bar width of 20 plus 1 for padding
						})
					   .attr("y", 75)
					   .attr("width", 25)
					   .attr("height", function(d, i) {

					   		if (d == 0) {
					   			return h - 220;
					   		}
					   		return h - 75;
					   	})
					   .attr("fill","darkgray");

  	var fence_frame_top = fenceparts.append("rect")
  							 .attr({
  							 	x: 0,
  							 	y: 100,
  							 	width: w,
  							 	height: 5,
  							 	fill: "black"
  							 });

  	var fence_frame_bottom = fenceparts.append("rect")
  								.attr({
  									x: 0,
  									y: h-20,
  									width: w,
  									height: 5,
  									fill: "black"
  								})

  	var my_dog = create_dog(1);



  	var staring_dog = create_dog_looking_through_fence(svg);

	/////////////////////////////////////////////// END GRASS_IS_GREENER SVG **************************************

	/////////////////////////////////////////////// START SEASONS SVG *********************************
	var seasons_svg = d3.select("body")
						.append("svg")
						.attr("width",w)
						.attr("height",h)



  	var winter = seasons_svg.append("g")
  							.attr("class", "winter");

	// fence stuff
/*	var rectangles = seasons_svg.selectAll("class", "fence")
					   .data(dataset)
					   .enter()
					   .append("rect")
					   //.attr("class","fence")
					   .attr("x", function(d, i) {
						    return i * 35;  //Bar width of 20 plus 1 for padding
						})
					   .attr("y", 75)
					   .attr("width", 30)
					   .attr("height", h - 75)
					   .attr("fill","silver");

	var fence_frame_top = seasons_svg.append("rect")
  						 .attr("x",0)
  						 .attr("y",100)
  						 .attr("width",w)
  						 .attr("height",5)
  						 .attr("fill","black");

  	var fence_frame_bottom = seasons_svg.append("rect")
  						 .attr("x",0)
  						 .attr("y",h-20)
  						 .attr("width",w)
  						 .attr("height",5)
  						 .attr("fill","black");
  	// end fence stuff
*/

  	var winter_sky = winter.append("rect")
  						   .attr("x", 0)
  						   .attr("y", 0)
  						   .attr("width", w)
  						   .attr("height", h)
  						   .attr("fill", "AliceBlue");

    /// RAINNN
    var rain = seasons_svg.append("g")
    					  .attr("class", "rain");
    //create an array of integers where the length corresponds to the number of rain particles
    var rain_place_holders =[], len=900; while (rain_place_holders[--len] = len);
    var rain_drops = rain.selectAll("class", "rain")
    				   .data(rain_place_holders)
    				   .enter()
    				   .append("rect")
    				   .attr({
    				   		x : function(d, i) { 
    				   			
    				   			return Math.floor(Math.random() * w);
    				   			
    				   		},
    				   		y : function(d, i) { 
    				   			if (i < 300){
    				   				return Math.floor(Math.random() * h);
    				   			} else if (i >= 300 && i < 600) {
    				   				//return (Math.floor(Math.random() * (h + h)) - h);
    				   				return (-Math.floor(Math.random() * h));
    				   			} else {
    				   				return (-2*Math.floor(Math.random() * h));
    				   			}
    				   		},
    				   		width: 3,
    				   		height: function(min, max) { return Math.floor(Math.random() * (20 - 10)) + 10;},
    				   		fill: "#6699CC"
    				   });

    /// SNOWWWW
    var snow = seasons_svg.append("g")
    					  .attr("class", "snow");
    //create an array of integers where the length corresponds to the number of rain particles
    var snow_place_holders =[], len=200; while (snow_place_holders[--len] = len);
    var snow_flakes = snow.selectAll("class", "snow")
    				   .data(snow_place_holders)
    				   .enter()
    				   .append("circle")
    				   .attr({
    				   		cx : function(d, i) { 
    				   			
    				   			return Math.floor(Math.random() * w);
    				   			
    				   		},
    				   		cy : function(d, i) { 
    				   			if (i < 150){
    				   				return Math.floor(Math.random() * h);
    				   			} else {
    				   				//return (Math.floor(Math.random() * (h + h)) - h);
    				   				return (-Math.floor(Math.random() * h));
    				   			}
    				   		},
    				   		r : function(min, max) { return Math.floor(Math.random() * (15 - 3)) + 3;},
    				   		fill: "white"
    				   });

    /// LEAVES
    var leaves = seasons_svg.append("g")
    					  .attr("class", "leaf");
    //create an array of integers where the length corresponds to the number of rain particles
    var leaf_place_holders =[], len=150; while (snow_place_holders[--len] = len);
    var dead_leaves = leaves.selectAll("class", "leaf")
    				   .data(snow_place_holders)
    				   .enter()
    				   .append("ellipse")
    				   .attr({
    				   		cx : function(d, i) { 
    				   			
    				   			return Math.floor(Math.random() * w);
    				   			
    				   		},
    				   		cy : function(d, i) { 
    				   			if (i < 75){
    				   				return Math.floor(Math.random() * h);
    				   			} else {
    				   				//return (Math.floor(Math.random() * (h + h)) - h);
    				   				return (-Math.floor(Math.random() * h));
    				   			}
    				   		},
    				   		rx : function(min, max) { return Math.floor(Math.random() * (6 - 3)) + 3;},
    				   		ry : function(min, max) { return Math.floor(Math.random() * (15 - 7)) + 7;},
    				   		fill: function(d,i) { return i%2 == 0 ? "green" : "orange";}
    				   });

	/////////////////////////////////////////////// END SEASONS SVG ***********************************



  </script>

<!--<input type="button" onClick="stop=!stop;circleBounce(); if (stop) this.value='Start'; else this.value='Stop';return false" VALUE="Start">-->
  <h1>This is a Heading</h1>
  <p>This is a paragraph.</p>

</body>

</html>